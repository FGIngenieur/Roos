<!DOCTYPE html>
{% load static %}
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roos AI | Import a project</title>
    <link rel="stylesheet" href="{% static 'myapp/css/sidebar.css' %}">
    <link href="https://unpkg.com/lucide-static@latest/font/lucide.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.46.1/dist/umd/supabase.min.js"></script>
  
</head>

<style>
    body {
            height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
.btn {
  background-color: #007bff;
  color: white;
  padding: 10px 20px;
  border-radius: 5px;
  text-decoration: none;
  display: inline-block;
}
.btn:hover {
  background-color: #0056b3;
}
.upload-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      border: none;
      background-color: #007bff;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }
    input[type="file"] {
      display: none; /* hide default file input */
    }
    .error-message {
            color: red;
            margin-top: 15px;
            font-size: 14px;
        }
.upload-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background-color: #007bff;
      color: none;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      justify-content: center;
    }

    .button-container {
  display: flex;
  justify-content: center; /* centers horizontally */
  gap: 12px; /* space between buttons */
  margin-top: 20px;
}

    input[type="file"] {
      display: none; /* hide the file input */
    }

    pre {
      background: #f9f9f9;
      padding: 10px;
      border-radius: 5px;
      white-space: pre-wrap;
    }
</style>

<body>
    {% include '../Common/menu.html' %}
    <!-- Contenu principal -->
     <div class="main-content">
        <h1>Importer votre projet</h1>
        <br>
        <br>

 <form id="uploadForm" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <!-- Hidden input -->
    <input type="file" name="importFile" id="fileInput" accept=".xlsx">
    <div class="button-container">

    <!-- Visible button -->
    <button type="button" class="upload-btn" id="openFileBtn">
      <i data-lucide="upload"></i> Depuis votre PC
    </button>

<button type="button" id = "openFilePicker" class = upload-btn>Import File</button>

<div id="filePickerModal" class="modal">
  <div class="modal-content">
    <h3>Select a file</h3>             <!-- Header stays visible -->
    <div id="fileListContainer">
      <ul id="fileList"></ul>
    </div>
    <button id="closeModal" type="button">Close</button>
  </div>
</div>
    </div>

<div class="button-container">
    <button type = "submit" class = "upload-btn" style="background-color: rgb(0, 128, 117);" id="submitBtn">
      <i data-lucide="check"></i> Téléverser le projet
    </button>
    </div>
  </form>
     </div>
<style>
.modal {
  display: none; /* hidden initially */
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.5);
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  background: white;
  padding: 20px 30px;
  border-radius: 8px;
  max-width: 400px;
  width: 90%;
  max-height: 70vh;          /* total modal height */
  display: flex;
  flex-direction: column;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  overflow: hidden;          /* prevent children from overflowing */
}

#fileListContainer {
  flex: 1;                   /* takes remaining space */
  overflow-y: auto;          /* scrollable if content is too long */
  margin: 10px 0;
}

#fileListContainer ul {
  padding: 0;
  margin: 0;
  list-style: none;
}

#fileListContainer {
  flex: 1;               /* scrollable content */
  overflow-y: auto;
  margin: 10px 0;
}

#closeModal {
  margin-top: 10px;      /* keeps it visible below the list */
}


#fileList li {
  margin-bottom: 8px;
}

#fileList button {
  width: 100%;
  text-align: left;
  padding: 8px 12px;
  border: none;
  background: #f0f0f0;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.2s;
}

#fileList button:hover {
  background: #d0d0ff;
}
</style>




  <!--
  {% if text %}
    <h3>File contents:</h3>
    <pre>{{ text }}</pre>
  {% endif %}-->
    <!-- Script -->
     {% include 'myapp/Common/changeTheme.html' %}
     {% include 'myapp/Common/fileExplorer.html' %}
</body>
</html>