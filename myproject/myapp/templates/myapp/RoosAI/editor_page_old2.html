{% extends "myapp/RoosAI/base.html" %}
{% block content %}

<h1>Imported Data</h1>

<div id="entries-container" style="display:flex; flex-direction:column; gap:1rem;">
    
    {% if rows|length == 0 %}
        <p>No data. Blank page.</p>
    {% endif %}

    {% for row in rows %}
    <div class="entry-box" 
         style="border:1px solid #ccc; padding:1rem; border-radius:20px;">

        <!-- Description -->
        <label><strong>Description:</strong></label><br>
        <textarea name="description" rows="2" style="width:100%;">{{ row.Description }}</textarea>
        <br><br>

        <!-- Unit Price -->
        <label><strong>Unit Price:</strong></label><br>
        <input type="number" name="unit_price" step="0.01" value="{{ row.Unit_price }}">
        <br><br>

        <!-- Quantity -->
        <label><strong>Quantity:</strong></label><br>
        <input type="number" name="quantity" step="0.01" value="{{ row.Quantity }}">
        <br><br>

        <!-- Total Price -->
        <label><strong>Total Price:</strong></label><br>
        <input type="number" name="total_price" step="0.01" value="{{ row.Total_price }}">
        <br><br>

        <!-- Unit -->
        <label><strong>Unit:</strong></label><br>
        <select name="unit">
            <option value="m2"  {% if row.Unit == "m2" %}selected{% endif %}>m2</option>
            <option value="m3"  {% if row.Unit == "m3" %}selected{% endif %}>m3</option>
            <option value="kgs" {% if row.Unit == "kgs" %}selected{% endif %}>kgs</option>
            <option value="room" {% if row.Unit == "room" %}selected{% endif %}>room</option>
        </select>

    </div>
    {% endfor %}
</div>

<br>

<!-- Add new entry button -->
<button id="add-entry-btn" 
        style="padding:10px 20px; border-radius:10px; background:#007bff; color:white; border:none;">
    Add a new entry
</button>


<!-- JavaScript template for new entries -->
<script>
document.getElementById("add-entry-btn").addEventListener("click", function() {

    const container = document.getElementById("entries-container");

    const newBox = document.createElement("div");
    newBox.classList.add("entry-box");
    newBox.style.cssText = "border:1px solid #ccc; padding:1rem; border-radius:20px; margin-top:1rem;";

    newBox.innerHTML = `
        <label><strong>Description:</strong></label><br>
        <textarea name="description" rows="2" style="width:100%;"></textarea>
        <br><br>

        <label><strong>Unit Price:</strong></label><br>
        <input type="number" name="unit_price" step="0.01" value="">
        <br><br>

        <label><strong>Quantity:</strong></label><br>
        <input type="number" name="quantity" step="0.01" value="">
        <br><br>

        <label><strong>Total Price:</strong></label><br>
        <input type="number" name="total_price" step="0.01" value="">
        <br><br>

        <label><strong>Unit:</strong></label><br>
        <select name="unit">
            <option value="m2">m2</option>
            <option value="m3">m3</option>
            <option value="kgs">kgs</option>
            <option value="room">room</option>
        </select>
    `;

    container.appendChild(newBox);
});
</script>

{% endblock %}
